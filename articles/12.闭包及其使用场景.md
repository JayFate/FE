### é—­åŒ…çš„æ¦‚å¿µ

### ä»€ä¹ˆæ˜¯é—­åŒ…

`é—­åŒ…æ„å‘³ç€å†…éƒ¨å‡½æ•°å§‹ç»ˆå¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡å’Œå‚æ•°ï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»è¿”å›ã€‚`
æˆ‘ä»¬å¯ä»¥åœ¨ JavaScript ä¸­åˆ›å»ºåµŒå¥—å‡½æ•°ã€‚å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡å’Œå‚æ•°(ä½†æ˜¯ï¼Œä¸èƒ½è®¿é—®å¤–éƒ¨å‡½æ•°çš„å‚æ•°å¯¹è±¡arguments)ã€‚
çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­:
```javascript
function OuterFunction() {
    var outerVariable = 1;
    function InnerFunction() {
        console.log(outerVariable);
    }
    InnerFunction();  // 1
}
å¤åˆ¶ä»£ç 
```
InnerFunction() å¯ä»¥è®¿é—® outerVariable

- é—­åŒ…ç‰¹æ€§ 1ï¼š
```javascript
function OuterFunction() {
   var outerVariable = 100;
   function InnerFunction() {
       alert(outerVariable);
   }
   return InnerFunction;
}
var innerFunc = OuterFunction();
innerFunc(); // 100
```
åœ¨ä¸Šé¢çš„ä¾‹å­, å½“è°ƒç”¨ OuterFunction() æ—¶ï¼Œä» OuterFunction è¿”å›InnerFunction å‡½æ•°ã€‚å˜é‡ innerFunc åªå¼•ç”¨InnerFunction()ï¼Œè€Œä¸æ˜¯OuterFunction()ã€‚ç°åœ¨ï¼Œå½“ä½ è°ƒç”¨ innerFunc() æ—¶ï¼Œå®ƒä»ç„¶å¯ä»¥è®¿é—®åœ¨ OuterFunction() ä¸­å£°æ˜çš„ outerVariableã€‚è¿™å°±æ˜¯é—­åŒ…ã€‚

- é—­åŒ…ç‰¹æ€§ 2
```javascript
function Counter() {
    var counter = 0;
    function IncreaseCounter() {
        return counter += 1;
    };
    return IncreaseCounter;
}
var counter = Counter();
console.log(counter()); // 1
console.log(counter()); // 2
console.log(counter()); // 3
console.log(counter()); // 4
```
é—­åŒ…çš„ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å¤–éƒ¨å˜é‡å¯ä»¥åœ¨å¤šæ¬¡è°ƒç”¨ä¹‹é—´ä¿æŒå…¶çŠ¶æ€ã€‚è¯·è®°ä½ï¼Œå†…éƒ¨å‡½æ•°ä¸ä¿ç•™å¤–éƒ¨å˜é‡çš„å•ç‹¬å‰¯æœ¬ï¼Œä½†å®ƒå¼•ç”¨å¤–éƒ¨å˜é‡ï¼Œè¿™æ„å‘³ç€å¦‚æœæ‚¨ä½¿ç”¨å†…éƒ¨å‡½æ•°æ”¹å˜å®ƒï¼Œå¤–éƒ¨å˜é‡çš„å€¼å°†è¢«æ”¹å˜ã€‚
åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¤–éƒ¨å‡½æ•° Counter è¿”å›å†…éƒ¨å‡½æ•° IncreaseCounterã€‚å¢åŠ  IncreaseCounter å°†å¤–éƒ¨å˜é‡ counter åŠ 1ã€‚å› æ­¤å¤šæ¬¡è°ƒç”¨ IncreaseCounter å‡½æ•°å°†ä½¿ counter å¤šæ¬¡åŠ 1ã€‚

- é—­åŒ…ç‰¹æ€§ 3
```javascript
function Counter() {
    
    var counter = 0;
    setTimeout( function () {
        var innerCounter = 0;
        counter += 1;
        console.log("counter = " + counter);
        setTimeout( function () {
            counter += 1;
            innerCounter += 1;
            console.log("counter = ", counter)
            console.log("innerCounter = ", innerCounter)
        }, 500);
    }, 1000);
};
Counter();
```
é—­åŒ…åœ¨å¤šå±‚å†…éƒ¨å‡½æ•°ä¸­æ˜¯æœ‰æ•ˆçš„ã€‚


ä»€ä¹ˆæ—¶å€™ä½¿ç”¨é—­åŒ…

- éšè—å†…éƒ¨å®ç°ç»†èŠ‚
```javascript
var counter = (function() {
  var privateCounter = 0;
  function changeBy(val) {
    privateCounter += val;
  }
  return {
    increment: function() {
      changeBy(1);
    },
    decrement: function() {
      changeBy(-1);
    },
    value: function() {
      return privateCounter;
    }
  };   
})();
alert(counter.value()); // 0
counter.increment();
counter.increment();
alert(counter.value()); // 2
counter.decrement();
alert(counter.value()); // 1
```
åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œincrement()ã€decrement() å’Œ value()æˆä¸ºå…¬å…±å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬åŒ…å«åœ¨è¿”å›å¯¹è±¡ä¸­ï¼Œè€ŒchangeBy() å‡½æ•°æˆä¸ºç§æœ‰å‡½æ•°ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¿”å›ï¼Œåªè¢« increment() å’Œ decrement() å†…éƒ¨ä½¿ç”¨ã€‚

- å‡½æ•°é˜²æŠ–
```javascript
window.onresize = function() {
  debounce(fn, 1000);
};
var fn = function() {
  console.log("fn");
};
function debounce(fn,time){
    let timer = null;
    return function(){
        if(timer){
            clearTimeout(timer)
        }
        timer = setTimeout(()=>{
            fn.apply(this,arguments)
        },time)
    }
}
```

### å…·ä½“ä½¿ç”¨åœºæ™¯

### 1.å‡½æ•°é˜²æŠ– 

æ¯”å¦‚è¦ç¼©æ”¾çª—å£ è§¦å‘onresize äº‹ä»¶ éœ€è¦åœ¨è¿™æ—¶å€™åšä¸€ä»¶äº‹æƒ…,ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›æ‹–åŠ¨çš„æ—¶å€™åªè§¦å‘ä¸€æ¬¡,æ¯”å¦‚

```js
window.onresize = function(){
    console.log('onresize')//åªæƒ³è§¦å‘ä¸€æ¬¡
}
```

ä¸€èˆ¬æ–¹æ³•vsé—­åŒ…

```js
// ä¸ä½¿ç”¨é—­åŒ…
window.onresize = function () {
  debounce(fn, 1000)
}
var fn = function () {
  console.log('fn')
}
var time = ''
function debounce(fn, timeLong) {
  if (time) {
    clearTimeout(time)
    time = ''
  }

  time = setTimeout(function () {
    fn()
  }, timeLong)
}



// ä½¿ç”¨é—­åŒ…
window.onresize = debounce(fn, 500)

function debounce(fn) {
  var timer = null
  return function () {
    if (timer) {     //timerç¬¬ä¸€æ¬¡æ‰§è¡Œåä¼šä¿å­˜åœ¨å†…å­˜é‡Œ æ°¸è¿œéƒ½æ˜¯æ‰§è¡Œå™¨ ç›´åˆ°æœ€åè¢«è§¦å‘
      clearTimeout(timer)
      timer = null
    }
    timer = setTimeout(function () {
      fn()
    }, 1000)
  }
}
var fn = function () {
  console.log('fn')
}
```

### 2.ä½¿ç”¨é—­åŒ…è®¾è®¡å•ä¾‹æ¨¡å¼

```js
class CreateUser {
  constructor(name) {
    this.name = name;
    this.getName();
  }
  getName() {
    return this.name;
  }
}
// ä»£ç†å®ç°å•ä¾‹æ¨¡å¼
var ProxyMode = (function () {
  var instance = null;
  return function (name) {
    if (!instance) {
      instance = new CreateUser(name);
    }
    return instance;
  }
})();
// æµ‹è¯•å•ä½“æ¨¡å¼çš„å®ä¾‹
var a = ProxyMode("aaa");
var b = ProxyMode("bbb");
// å› ä¸ºå•ä½“æ¨¡å¼æ˜¯åªå®ä¾‹åŒ–ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸‹é¢çš„å®ä¾‹æ˜¯ç›¸ç­‰çš„
console.log(a === b);    //true
```

### 3.è®¾ç½®ç§æœ‰å˜é‡

å†…éƒ¨å±æ€§ åœ¨javaé‡Œä½¿ç”¨privateå°±å¯ä»¥,ä½†æ˜¯js è¿˜æ²¡æœ‰è¿™ä¸ªä¸œä¸œ

```js
let _width = Symbol();

class Private {
  constructor(s) {
    this[_width] = s
  }

  foo() {
    console.log(this[_width])
  }

}

var p = new Private("50");
p.foo();
console.log(p[_width]);//å¯ä»¥æ‹¿åˆ°


//ä½¿ç”¨é—­åŒ…è®¾ç½®ç§æœ‰å˜é‡
let sque = (function () {
  let _width = Symbol();

  class Squery {
    constructor(s) {
      this[_width] = s
    }

    foo() {
      console.log(this[_width])
    }
  }
  return Squery
})();

let ss = new sque(20);
ss.foo();
console.log(ss[_width])  // Uncaught ReferenceError: _width is not defined
```

### 4.æ‹¿åˆ°æ­£ç¡®çš„å€¼ï¼ˆè€æ‰ç‰™çš„é—®é¢˜äº†ğŸ˜ï¼‰

```js
for (var i = 0; i < 10; i++) {
  setTimeout(function () {
    console.log(i)//10ä¸ª10
  }, 1000)
}
```

é‡åˆ°è¿™ç§é—®é¢˜ å¦‚ä½•ç”¨è§£å†³å‘¢

```js
for (var i = 0; i < 10; i++) {
  ((j) => {
    setTimeout(function () {
      console.log(j)//1-10
    }, 1000)
  })(i)

}
```

åŸç†æ˜¯ å£°æ˜äº†10ä¸ªè‡ªæ‰§è¡Œå‡½æ•°ï¼Œä¿å­˜å½“æ—¶çš„å€¼åˆ°å†…éƒ¨



